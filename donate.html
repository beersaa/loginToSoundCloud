<html>
<head>		
	<title>Thank you for donating!</title>
	<meta charset="UTF-5" />

	<link rel="shortcut icon" type="image/x-icon" href="slike/logo.svg" />
	<link rel="stylesheet" href="css/donate.css" type="text/css" media="all" />	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="css/iziToast.min.css">
</head>
<body>
	<div class="main">
		<div class="top">
			<div class="top-picture">
                <img class="top-picture-image" src="slike/headlogo.jpg" alt="SoundCloud">
            </div>
            <div class="top-donate">
                <a class="top-link" href="donate.html">Donate</a>
            </div>
            <div class="top-right">
                <div class="top-login">
                    <a class="top-link" href="index.html">
                        <button class="top-login-button">Login</button>
                    </a>
                </div>
                <div class="top-signup">
                    <a class="top-link" href="register.html">
                        <button class="top-signup-button">Sign up</button>
                    </a>
                </div>
            </div>
		</div>
		<div class="middle">
			<div class="field">
				<form id="form">
					<div class="field-top">
						<div id="thank-you-text">THANK YOU FOR DONATING TO</div>
					</div>
					<div class="field-middle">
						<div class="field-middle-name">
							<label for="name">Full name:<v>*</v></label><br>
							<input id=name class="field-middle-name-input" type="text" maxlength="20" required>
						</div>
						<div class="field-middle-surname">
							<label for="surname">Surname:<v>*</v></label><br>
							<input  id="surname" class="field-middle-surname-input" maxlength="20" required>
						</div>
						<div class="field-middle-email">
							<label for="email">Email:<v>*</v></label><br>
							<input id="email" class="field-middle-email-input" pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$" required>
						</div>
					</div>
					<div class="field-donation">
						<div class="field-donation-text">
							<label>Select donation amount:</label><br>
						</div>
						<div class="donation-options">
							<span id="radio1"><input id="radio1b" type="radio" value="1" name="amount" onchange="toggleCustomAmount(this)">1$</span>
                			<span id="radio2"><input id="radio2b" type="radio" value="5" name="amount" onchange="toggleCustomAmount(this)">5$</span>
                			<span id="radio3"><input id="radio3b" type="radio" value="10" name="amount" onchange="toggleCustomAmount(this)">10$</span>
                			<span id="radio4"><input id="radio4b" type="radio" value="25" name="amount" onchange="toggleCustomAmount(this)">25$</span>
                			<span id="radio5"><input id="radio5b" type="radio" value="50" name="amount" onchange="toggleCustomAmount(this)">50$</span>
                			<span id="radio6"><input id="radio6b" type="radio" value="0" name="amount" onchange="toggleCustomAmount(this)">Custom amount</span>
						</div>
						<div class="costum-donation">
							<input id="amount" type="number" placeholder="100$" maxlength="6" disabled>
						</div>
					</div>
					<div class="field-middle-bottom">
						<button id="paypal" class="button-paypal"><img class="img-paypal" src="slike/paypal.svg"> </button>
						<button  id="creditcard" class="button-creditcard" type="button"> Pay with credit card</button>
					</div>
				</form>	
			</div>
		</div>
		<div class="foot">
			<div class="copyright">
                <a href="https://github.com/beersaa" class="copyright-text" target="_blank">Â©</a> copyright by AB
            </div>
		</div>
	</div>
</body>
<script src="javascript/iziToast.min.js" type="text/javascript"></script>
<script>
    function toggleCustomAmount(radio) {
        var customAmountInput = document.getElementById("amount");
		
        if (radio.id === "radio6b") {
            customAmountInput.disabled = false;
        } else {
            customAmountInput.disabled = true;
            customAmountInput.value = "";
        }
    }

    document.getElementById('paypal').addEventListener('click', function (event) {
        event.preventDefault();
        var name = document.getElementById("name");
        var surname = document.getElementById("surname");
        var email = document.getElementById("email");
        var selectedAmount = document.querySelector('input[name="amount"]:checked');

        if (!name.value.trim()) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in your name!',
            });
        } else if (!surname.value.trim()) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in your surname!',
            });
        } else if (!email.value.trim() || !isValidEmail(email.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid email address!',
            });
        } else if (!selectedAmount) {
            iziToast.error({
                title: 'Error',
                message: 'Please select a donation amount!',
            });
        } else {
            iziToast.info({
                message: 'Coming soon!',
                titleColor: '#000000',
            });
            name.value = '';
            surname.value = '';
            email.value = '';
        }
    });

    document.getElementById('creditcard').addEventListener('click', function (event) {
        event.preventDefault();
        var name = document.getElementById("name");
        var surname = document.getElementById("surname");
        var email = document.getElementById("email");
        var selectedAmount = document.querySelector('input[name="amount"]:checked');

        var width = 500;
        var height = 750; 
        var left = (window.innerWidth - width) / 2;
        var top = (window.innerHeight - height) / 2;

        if (!name.value.trim()) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in your name!',
            });
        } else if (!surname.value.trim()) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in your surname!',
            });
        } else if (!email.value.trim() || !isValidEmail(email.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid email address!',
            });
        } else if (!selectedAmount) {
            iziToast.error({
                title: 'Error',
                message: 'Please select a donation amount!',
            });
        } else {
            window.open("creditcard.html", "CreditCardWindow", "width=" + width + ",height=" + height + ",left=" + left + ",top=" + top);
            iziToast.success({
                title: 'Thank you for your donation!',
                message: '!',
                color: '#ff7700',
                titleColor: '#000000',
            });
            name.value = '';
            surname.value = '';
            email.value = '';
        }
    });

    function isValidEmail(email) {
        var emailPattern = /^[a-zA-Z0-9._%+\-]+@[a-zAZ0-9.\-]+\.[a-z]{2,}$/;
        return emailPattern.test(email);
    }

    const amountInput = document.getElementById('amount');
    let timeout;
        
    amountInput.addEventListener('input', function() {
        clearTimeout(timeout);
        
        timeout = setTimeout(() => {
            const inputValue = amountInput.value;
            
            if (inputValue !== '' && inputValue.slice(-1) !== '$') {
                amountInput.value = inputValue + '$';
            }
        }, 500); 
    });
    const thankYouText = document.getElementById('thank-you-text');
    const field = document.querySelector('.field');

    field.addEventListener('mouseenter', () => {
        thankYouText.style.transition = 'opacity 0.5s, transform 0.5s';
        thankYouText.style.opacity = 0;
        thankYouText.style.transform = 'translateX(2%)';

        setTimeout(() => {
            thankYouText.innerHTML = '<img src="slike/headlogo.png" height="100%" width="60%" alt="Logo" >';
            thankYouText.style.transform = 'translateX(-20%)';
            setTimeout(() => {
                thankYouText.style.opacity = 1;
            }, 500);
        }, 500);
    });

    field.addEventListener('mouseleave', () => {
        thankYouText.style.transition = 'opacity 0.5s, transform 0.5s';
        thankYouText.style.opacity = 0;
        thankYouText.style.transform = 'translateX(-2%)';
        setTimeout(() => {
            thankYouText.innerHTML = 'THANK YOU FOR DONATING TO';

            setTimeout(() => {
                thankYouText.style.opacity = 1;
            }, 500);
        }, 500);
    });
</script>
</html>