<html>
<head>		
	<title>Thank you for donating!</title>
	<meta charset="UTF-5" />

	<link rel="shortcut icon" type="image/x-icon" href="slike/logo.svg" />
	<link rel="stylesheet" href="css/donate.css" type="text/css" media="all" />	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="css/iziToast.min.css">
    <link rel="stylesheet" href="css/sweetalert2.min.css">
</head>
<body>
	<div class="main">
		<div class="top">
			<div class="top-picture">
                <img class="top-picture-image" src="slike/headlogo.jpg" alt="SoundCloud">
            </div>
            <div class="top-donate">
                <a class="top-link" href="donate.html">Donate</a>
            </div>
            <div class="top-right">
                <div class="top-login">
                    <a class="top-link" href="index.html">
                        <button class="top-login-button">Login</button>
                    </a>
                </div>
                <div class="top-signup">
                    <a class="top-link" href="register.html">
                        <button class="top-signup-button">Sign up</button>
                    </a>
                </div>
            </div>
		</div>
		<div class="middle">
			<div class="field">
				<form id="form">
					<div class="field-top">
						<div id="thank-you-text"><img src="slike/headlogo.png" height="80%" width="60%" alt="Logo" ></div>
					</div>
					<div class="field-middle">
						<div class="field-middle-name">
							<label for="name">Full name:<v>*</v></label><br>
							<input id=name class="field-middle-name-input" type="text" maxlength="20" pattern="[A-Za-z]" required>
						</div>
						<div class="field-middle-surname">
							<label for="surname">Surname:<v>*</v></label><br>
							<input  id="surname" class="field-middle-surname-input" maxlength="20" required>
						</div>
						<div class="field-middle-email">
							<label for="email">Email:<v>*</v></label><br>
							<input id="email" class="field-middle-email-input" pattern="[a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,}$" required>
						</div>
					</div>
					<div class="field-donation">
						<div class="field-donation-text">
							<label>Select donation amount:</label><br>
						</div>
						<div class="donation-options">
							<span id="radio1"><input id="radio1b" type="radio" value="1" name="amount" onchange="toggleCustomAmount(this)">1$</span>
                			<span id="radio2"><input id="radio2b" type="radio" value="5" name="amount" onchange="toggleCustomAmount(this)">5$</span>
                			<span id="radio3"><input id="radio3b" type="radio" value="10" name="amount" onchange="toggleCustomAmount(this)">10$</span>
                			<span id="radio4"><input id="radio4b" type="radio" value="25" name="amount" onchange="toggleCustomAmount(this)">25$</span>
                			<span id="radio5"><input id="radio5b" type="radio" value="50" name="amount" onchange="toggleCustomAmount(this)">50$</span>
                			<span id="radio6"><input id="radio6b" type="radio" value="0" name="amount" onchange="toggleCustomAmount(this)">Custom amount</span>
						</div>
						<div class="costum-donation">
							<input id="amount" onkeypress="return isNumberKey(event)" onfocus="this.value=''" type="text" placeholder="100$" maxlength="6" disabled>
						</div>
					</div>
					<div class="field-middle-bottom">
						<button id="paypal" class="button-paypal" type="button"><img class="img-paypal" src="slike/paypal-logo.png"> </button>
						<button  id="creditcard" class="button-creditcard" type="button"> Pay with credit card</button>
					</div>
				</form>	
			</div>
		</div>
		<div class="foot">
			<div class="copyright">
                <a class="copyright-text" target="_blank">©</a> copyright by AB
            </div>
		</div>
	</div>
</body>
<script src="javascript/iziToast.min.js" type="text/javascript"></script>
<script src="javascript/sweetalert2.min.js" type="text/javascript"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var copyRight = document.querySelector('.copyright-text');

            if (copyRight) {
                copyRight.addEventListener('click', function (event) {
                    Swal.fire({
                        title: "Made by AB",
                        text: "https://github.com/beersaa",
                        icon: "info",
                        iconColor:"#ff7700",
                        confirmButtonColor:"#ff7700",
                        backdrop: `
                        rgba(0,0,123,0.4)
                        url("/slike/secret.gif")
                        left top
                        no-repeat
                        `
                    });
                });
            }
        document.body.style.backgroundColor = 'black';
        document.body.style.transition = 'opacity 1s ease-in-out';
        document.body.style.opacity = 1;
        var topLogin = document.querySelector('.top-login');

        if (topLogin) {
            topLogin.addEventListener('click', function (event) {
                event.preventDefault();

                document.body.style.backgroundColor = 'black';

                document.body.style.transition = 'opacity 0.5s ease-in-out';
                document.body.style.opacity = 0;

                setTimeout(function () {
                    window.location.href = 'index.html';
                }, 1000);
            });
        }
        var topSignup = document.querySelector('.top-signup');

        if (topSignup) {
            topSignup.addEventListener('click', function (event) {
                event.preventDefault();

                document.body.style.backgroundColor = 'black';

                document.body.style.transition = 'opacity 0.5s ease-in-out';
                document.body.style.opacity = 0;

                setTimeout(function () {
                    window.location.href = 'register.html';
                }, 1000);
            });
        }
        var topDonate = document.querySelector('.top-donate');

        if (topDonate) {
            topDonate.addEventListener('click', function (event) {
                event.preventDefault();

                document.body.style.backgroundColor = 'black';

                document.body.style.transition = 'opacity 0.5s ease-in-out';
                document.body.style.opacity = 0;

                setTimeout(function () {
                    window.location.href = 'donate.html';
                }, 1000);
            });
        }
    });
    function toggleCustomAmount(radio) {
        var customAmountInput = document.getElementById("amount");
		
        if (radio.id === "radio6b") {
            customAmountInput.disabled = false;
        } else {
            customAmountInput.disabled = true;
            customAmountInput.value = "";
        }
    }

    document.getElementById('paypal').addEventListener('click', function (event) {
        event.preventDefault();
        var name = document.getElementById("name");
        var surname = document.getElementById("surname");
        var email = document.getElementById("email");
        var selectedAmount = document.querySelector('input[name="amount"]:checked');

        var width = 500;
        var height = 750; 
        var left = (window.innerWidth - width) / 2;
        var top = (window.innerHeight - height) / 2;

        var nameRegex = /^[a-zA-ZžŽšŠćĆčČđĐ\s\.]+$/;
        
        if (!name.value.trim() || !nameRegex.test(name.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid name without numbers or special characters!',
            });
        } else if (!surname.value.trim() || !nameRegex.test(surname.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid surname without numbers or special characters!',
            });
        } else if (!email.value.trim() || !isValidEmail(email.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid email address!',
            });
        } else if (!selectedAmount) {
            iziToast.error({
                title: 'Error',
                message: 'Please select a donation amount!',
            });
        } else {
            window.open("paypal.html", "CreditCardWindow", "width=" + width + ",height=" + height + ",left=" + left + ",top=" + top);
            iziToast.success({
                title: 'Thank you for your donation!',
                color: '#ff7700',
                titleColor: '#000000',
            });
            var radioButtons = form.querySelectorAll('input[type="radio"]');
            for (var i = 0; i < radioButtons.length; i++) {
                radioButtons[i].checked = false;
            } 
            name.value = '';
            surname.value = '';
            email.value = '';
        }
    });

    document.getElementById('creditcard').addEventListener('click', function (event) {
        event.preventDefault();
        var name = document.getElementById("name");
        var surname = document.getElementById("surname");
        var email = document.getElementById("email");
        var selectedAmount = document.querySelector('input[name="amount"]:checked');

        var width = 500;
        var height = 750; 
        var left = (window.innerWidth - width) / 2;
        var top = (window.innerHeight - height) / 2;

        var nameRegex = /^[a-zA-ZžŽšŠćĆčČđĐ\s\.]+$/;
        
        if (!name.value.trim() || !nameRegex.test(name.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid name without numbers or special characters!',
            });
        } else if (!surname.value.trim() || !nameRegex.test(surname.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid surname without numbers or special characters!',
            });
        } else if (!email.value.trim() || !isValidEmail(email.value)) {
            iziToast.error({
                title: 'Error',
                message: 'Please type in a valid email address!',
            });
        } else if (!selectedAmount) {
            iziToast.error({
                title: 'Error',
                message: 'Please select a donation amount!',
            });
        } else {
            window.open("creditcard.html", "CreditCardWindow", "width=" + width + ",height=" + height + ",left=" + left + ",top=" + top);
            iziToast.success({
                title: 'Thank you for your donation!',
                message: '!',
                color: '#ff7700',
                titleColor: '#000000',
            });
            var radioButtons = form.querySelectorAll('input[type="radio"]');
                for (var i = 0; i < radioButtons.length; i++) {
                radioButtons[i].checked = false;
            }
            name.value = '';
            surname.value = '';
            email.value = '';
        }
    });

    function isValidEmail(email) {
        var emailPattern = /^[a-zA-Z0-9._%+\-]+@[a-zAZ0-9.\-]+\.[a-z]{2,}$/;
        return emailPattern.test(email);
    }

    const amountInput = document.getElementById('amount');
    let timeout;
        
    amountInput.addEventListener('input', function() {
        clearTimeout(timeout);
        
        timeout = setTimeout(() => {
            const inputValue = amountInput.value;
            
            if (inputValue !== '' && inputValue.slice(-1) !== '$') {
                amountInput.value = inputValue + '$';
            }
        }, 500); 
    });
    const thankYouText = document.getElementById('thank-you-text');
    const field = document.querySelector('.field');

    field.addEventListener('mouseleave', () => {
        thankYouText.style.transition = 'opacity 0.5s, transform 0.5s';
        thankYouText.style.opacity = 0;
        thankYouText.style.transform = 'translateX(-2%)';

        setTimeout(() => {
            thankYouText.innerHTML = '<img src="slike/headlogo.png" height="100%" width="60%" alt="Logo" >';
            thankYouText.style.transform = 'translateX(-20%)';
            setTimeout(() => {
                thankYouText.style.opacity = 1;
            }, 500);
        }, 500);
    });

    field.addEventListener('mouseenter', () => {

        thankYouText.style.transition = 'opacity 0.5s, transform 0.5s';
        thankYouText.style.opacity = 0;
        thankYouText.style.transform = 'translateX(2%)';

        
        setTimeout(() => {
            thankYouText.innerHTML = 'THANK YOU FOR DONATING';

            setTimeout(() => {
                thankYouText.style.opacity = 1;
            }, 500);
        }, 500);
    });
    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : evt.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
</script>
</html>